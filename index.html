<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Trade Trinity</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#000000">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: radial-gradient(circle at top, #1a1a1a 0%, #000000 60%);
  color: #f5f5f5;
  text-align: center;
      padding-bottom: 120px;
}
    .gold {
      color: #D4AF37;
    }
    
    .card-row {
      display: flex;
      justify-content: space-around;
      margin: 20px;
    }
    .card {
      background: #111;
      padding: 15px;
      border-radius: 10px;
      width: 28%;
    }
    .btn {
  background: linear-gradient(145deg, #C9A227, #E6C35C);
  padding: 16px 36px;
  border: none;
  border-radius: 12px;
  font-size: 18px;
  font-weight: 600;
  margin-top: 30px;
  cursor: pointer;
  color: #111;
  box-shadow: 0 8px 20px rgba(212,175,55,0.35);
  transition: all 0.2s ease;
}

.btn:active {
  transform: scale(0.97);
  box-shadow: 0 4px 10px rgba(212,175,55,0.25);
}
    .name {
      position: relative;
      bottom: 10px;
      right: 15px;
      font-size: 12px;
      color: #D4AF37;
    }
    .stats-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 40px 20px;
  padding: 20px 10px;
  background: #111;
  border-radius: 16px;
  border: 1px solid rgba(212,175,55,0.15);
}

.stat-box {
  flex: 1;
  text-align: center;
}

.stat-number {
  font-size: 26px;
  font-weight: 600;
  color: #D4AF37;
}

.stat-label {
  font-size: 12px;
  color: #888;
  letter-spacing: 1px;
  margin-top: 6px;
}

.divider {
  width: 1px;
  height: 40px;
  background: rgba(212,175,55,0.2);
}
  .bottom-nav {
    position: fixed;
    bottom: 12px;
    left: 50%;
    transform: translateX(-50%);
    width: 92%;
    background: rgba(15,15,15,0.85);
    border: 1px solid rgba(212,175,55,0.2);
    border-radius: 22px;
    display: flex;
    justify-content: space-around;
    padding: 14px 0;
    backdrop-filter: blur(20px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
  }

.nav-item {
  color: #777;
  font-size: 13px;
  letter-spacing: 1px;
}

.nav-item.active {
  color: #D4AF37;
  font-weight: 600;
}
  </style>
</head>

<body>

  
<img src="logo.png" alt="Trade Trinity Logo"
     style="width:280px;margin-top:60px;display:block;margin-left:auto;margin-right:auto;filter: drop-shadow(0 0 20px rgba(212,175,55,0.4));">

<div class="stats-bar">
  
  <div class="stat-box">
    <div class="stat-number" id="totalTrades">0</div>
    <div class="stat-label">Total Trades</div>
  </div>

  <div class="divider"></div>

  <div class="stat-box">
    <div class="stat-number" id="winRate">0%</div>
    <div class="stat-label">Win Rate</div>
  </div>

  <div class="divider"></div>

  <div class="stat-box">
    <div class="stat-number" id="avgRR">0.0</div>
    <div class="stat-label">Avg R:R</div>
  </div>

</div>


  

 <button class="btn" id="newTradeBtn">+ New Trade</button> 
  <div id="equitySection" style="margin:30px 20px;">
  <h3 class="gold" style="margin-bottom:15px;">Daily Performance</h3>
  <canvas id="equityChart" height="120"></canvas>
  </div>
<div id="journalSection" style="margin:30px; display:none;">
  <h3 class="gold">Trade Journal</h3>
  <div id="tradeList"></div>
</div>
  
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { 
  getAuth, 
  createUserWithEmailAndPassword, 
  signInWithEmailAndPassword,
  sendPasswordResetEmail,
  onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";

import { 
  getFirestore, 
  collection, 
  addDoc, 
  getDocs 
} from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDPMSmppyUouvyzbrr-NDGWQCBBbtoaDls",
  authDomain: "trade-trinity-185e3.firebaseapp.com",
  projectId: "trade-trinity-185e3",
  storageBucket: "trade-trinity-185e3.firebasestorage.app",
  messagingSenderId: "816692119340",
  appId: "1:816692119340:web:7165d8c4ae85d6ff420e89"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

function showLoginPopup() {
  document.body.insertAdjacentHTML("beforeend", `
  <div id="loginModal" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);display:flex;justify-content:center;align-items:center;">
      <div style="background:#111;padding:30px;border-radius:12px;width:300px;text-align:center;">
          <h3 style="color:#D4AF37;">Login / Sign Up</h3>
          <input id="emailInput" placeholder="Email" style="width:100%;margin:8px 0;padding:8px;">
          <input id="passwordInput" type="password" placeholder="Password" style="width:100%;margin:8px 0;padding:8px;">
          <button id="loginBtn" style="margin-top:10px;padding:8px 15px;background:#D4AF37;border:none;width:100%;">Login</button>
          <button id="signupBtn" style="margin-top:10px;padding:8px 15px;background:#444;border:none;color:white;width:100%;">Sign Up</button>
          <button id="resetBtn" style="margin-top:10px;padding:8px 15px;background:#222;border:none;color:#D4AF37;width:100%;">Forgot Password</button>
      </div>
  </div>
  `);

  document.getElementById("loginBtn").onclick = async () => {
    const email = document.getElementById("emailInput").value;
    const password = document.getElementById("passwordInput").value;
    await signInWithEmailAndPassword(auth, email, password);
    document.getElementById("loginModal").remove();
  };

  document.getElementById("signupBtn").onclick = async () => {
    const email = document.getElementById("emailInput").value;
    const password = document.getElementById("passwordInput").value;
    await createUserWithEmailAndPassword(auth, email, password);
    alert("Account created");
  };

  document.getElementById("resetBtn").onclick = async () => {
    const email = document.getElementById("emailInput").value;
    await sendPasswordResetEmail(auth, email);
    alert("Reset email sent");
  };
}

document.getElementById("newTradeBtn").addEventListener("click", () => {
  document.body.insertAdjacentHTML("beforeend", `
  <div id="tradeModal" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);display:flex;justify-content:center;align-items:center;">
    <div style="background:#111;padding:25px;border-radius:12px;width:300px;text-align:center;">
      <h3 style="color:#D4AF37;">Add New Trade</h3>
      <input id="pairInput" placeholder="Pair" style="width:100%;margin:8px 0;padding:8px;">
      <input id="resultInput" placeholder="Result (win/loss)" style="width:100%;margin:8px 0;padding:8px;">
      <input id="rrInput" placeholder="R:R" style="width:100%;margin:8px 0;padding:8px;">
      <button id="saveTradeBtn" style="margin-top:10px;padding:8px 15px;background:#D4AF37;border:none;">Save Trade</button>
      <button onclick="document.getElementById('tradeModal').remove()" style="margin-top:10px;padding:8px 15px;background:#444;border:none;color:white;">Close</button>
    </div>
  </div>
  `);

  document.getElementById("saveTradeBtn").onclick = async () => {

    const user = auth.currentUser;
    if (!user) return;

    const pair = document.getElementById("pairInput").value;
    const result = document.getElementById("resultInput").value.toLowerCase();
    const rr = parseFloat(document.getElementById("rrInput").value);

    await addDoc(collection(db, "trades"), {
      uid: user.uid,
      pair,
      result,
      rr,
      createdAt: new Date()
    });

    document.getElementById("tradeModal").remove();
    loadStats(user);
  };
});

async function loadStats(user) {
  let totalTrades = 0;
  let wins = 0;
  let totalRR = 0;
const tradeList = document.getElementById("tradeList");
tradeList.innerHTML = "";
  const snapshot = await getDocs(collection(db, "trades"));
  const tradesArray = [];
  snapshot.forEach(doc => {
    const trade = doc.data();
    tradesArray.push(trade);
    if (trade.uid === user.uid) {
      // Add trade to journal
tradeList.innerHTML += `
  <div style="
    background:#111;
    padding:10px;
    margin:10px 0;
    border-radius:8px;
    text-align:left;
  ">
    <strong>${trade.pair}</strong><br>
    Result: ${trade.result}<br>
    R:R: ${trade.rr}
  </div>
`;
      totalTrades++;
      if (trade.result === "win") {
        wins++;
        totalRR += trade.rr;
      }
    }
  });

  const winPercentage = totalTrades > 0 ? ((wins / totalTrades) * 100).toFixed(0) : 0;
  const avgRR = wins > 0 ? (totalRR / wins).toFixed(2) : 0;

  document.getElementById("totalTrades").innerText = totalTrades;
  document.getElementById("winRate").innerText = winPercentage + "%";
  document.getElementById("avgRR").innerText = avgRR;

}

onAuthStateChanged(auth, (user) => {
  if (!user) {
    showLoginPopup();
  } else {
    loadStats(user);
  }
});
 // Tab switching
const dashboardTab = document.getElementById("dashboardTab");
const journalTab = document.getElementById("journalTab");
const journalSection = document.getElementById("journalSection");

dashboardTab.addEventListener("click", () => {
  journalSection.style.display = "none";
  dashboardTab.classList.add("active");
  journalTab.classList.remove("active");
});

journalTab.addEventListener("click", () => {
  journalSection.style.display = "block";
  dashboardTab.classList.remove("active");
  journalTab.classList.add("active");
}); 
  // Simple demo equity chart
const ctx = document.getElementById('equityChart');

if (ctx) {
  new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],
      datasets: [{
        label: 'Equity',
        data: [100, 120, 110, 150, 140, 170, 200],
        borderColor: '#D4AF37',
        backgroundColor: 'rgba(212,175,55,0.1)',
        tension: 0.4,
        fill: true
      }]
    },
    options: {
      plugins: { legend: { display: false } },
      scales: {
        x: { ticks: { color: '#888' }, grid: { display: false } },
        y: { ticks: { color: '#888' }, grid: { color: 'rgba(255,255,255,0.05)' } }
      }
    }
  });
}
</script>
 <div class="bottom-nav">
  <div class="nav-item active" id="dashboardTab">
  <span class="material-icons">dashboard</span>
  <div>Dashboard</div>
</div>

<div class="nav-item" id="journalTab">
  <span class="material-icons">menu_book</span>
  <div>Journal</div>
</div>

<div class="nav-item">
  <span class="material-icons">bar_chart</span>
  <div>Statistics</div>
</div>

<div class="nav-item">
  <span class="material-icons">more_horiz</span>
  <div>More</div>
</div>
</div>
</body>
      </html>
